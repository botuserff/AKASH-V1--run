module.exports.config = {
  name: "antibd",
  eventType: ["log:user-nickname"],
  version: "1.0.0",
  credits: "Mohammad Akash",
  description: "Against changing Bot's nickname"
};

module.exports.run = async function({ api, event, Users, Threads }) {
  var { logMessageData, threadID, author } = event;
  var botID = api.getCurrentUserID();
  var { BOTNAME, ADMINBOT } = global.config;

  // ржмржЯрзЗрж░ ржЖрж╕рж▓ ржирж╛ржо ржмрзЗрж░ ржХрж░рж╛
  var { nickname } = await Threads.getData(threadID, botID);
  var nickname = nickname ? nickname : BOTNAME;

  // ржпржжрж┐ ржХрзЗржЙ ржмржЯрзЗрж░ ржирж┐ржХржирзЗржо ржЪрзЗржЮрзНржЬ ржХрж░рзЗ
  if (logMessageData.participant_id == botID && author != botID && !ADMINBOT.includes(author) && logMessageData.nickname != nickname) {
    
    // ржмржЯрзЗрж░ ржЖрж╕рж▓ ржирж┐ржХржирзЗржо ржлрж┐рж░рж┐рзЯрзЗ ржжрзЗржУрзЯрж╛
    api.changeNickname(nickname, threadID, botID);

    // ржЗржЙржЬрж╛рж░рзЗрж░ ржЗржиржлрзЛ ржЖржирж╛
    var info = await Users.getData(author);

    // Premium Banner Style ржЖржЙржЯржкрзБржЯ
    return api.sendMessage({
      body: `тХФтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХЧ
         тЬи ЁЭРАЁЭРНЁЭРУЁЭРИ - ЁЭРНЁЭРИЁЭРВЁЭРКЁЭРНЁЭРАЁЭРМЁЭРД ЁЭРТЁЭРШЁЭРТЁЭРУЁЭРДЁЭРМ тЬи
тХЪтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХЭ

ЁЯСд ржЗржЙржЬрж╛рж░: ${info.name}
тФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБ
тЪая╕П рж╕рждрж░рзНржХржмрж╛рж░рзНрждрж╛: ржирж┐ржХржирзЗржо ржкрж░рж┐ржмрж░рзНрждржи ржмрзНржпрж░рзНрже тЭМ
тФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБ

ЁЯУМ ржирж┐рзЯржорж╛ржмрж▓рзА:
   тЦк рж╢рзБржзрзБржорж╛рждрзНрж░ ржЖржорж╛рж░ ржмрж╕ ЁЯСС ржЖржХрж╛рж╢  
     ржирж┐ржХржирзЗржо ржкрж░рж┐ржмрж░рзНрждржи ржХрж░рж╛рж░ ржЕржзрж┐ржХрж╛рж░ рж░рж╛ржЦрзЗ ЁЯЦР

тФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБ
ЁЯТб ржЯрж┐ржкрж╕: ржЪрзЗрж╖рзНржЯрж╛ ржХржЗрж░рж╛ рж▓рж╛ржн ржирж╛ржЗ ржнрж╛ржЗ ЁЯШ╣  
тФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБ
ЁЯЪл рж╕рж┐ржХрж┐ржЙрж░рж┐ржЯрж┐ рж▓ржХ ржЕржи ржХрж░рж╛ ржЖржЫрзЗ ЁЯФТ
`
    }, threadID);
  }
};
